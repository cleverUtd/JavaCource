# 第11周

基于 Redis 封装分布式数据操作：
- 在 Java 中实现一个简单的分布式锁；
- 在 Java 中实现一个分布式计数器，模拟减库存。


## 助教建议

```
1.在扣减库存的时候，有一些同学是分成两个步骤，先看库存数量，然后再扣减。这是不安全的，因为在你检查通过之后，扣库存之前，库存就可能被人扣完了；

2.有些同学是上来二话不说就直接扣库存，如果剩下的库存还大于等于0，就说明成功。那么问题就在，如果库存只有十件，我要买十一件，失败之后我再尝试买一件，会怎样；

3.分布式锁大部分同学都做得很好。这里面有一个小问题，大家可以思考一下：大部分时候我觉得我的业务都能在十秒钟内完成，于是我把过期时间设置为十秒钟。但是，偶尔会有业务超过十秒钟，这时候我应该怎么确保我始终能够持有这把锁呢？
```

## 优秀作业参考
https://github.com/haibo-duan/geektime-study/blob/main/doc/JavaCourseStudy/week11/%E7%AC%AC%E5%8D%81%E4%B8%80%E5%91%A8%E4%BD%9C%E4%B8%9A.md 这一份作业很详细，大家可以看看

https://github.com/pp680111/Week11 这一份作业有一个缓存压测，大家也可以看看

